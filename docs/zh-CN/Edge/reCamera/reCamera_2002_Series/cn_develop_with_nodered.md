---
description: å…³äºåœ¨reCameraä¸Šä½¿ç”¨Node-REDè¿›è¡Œå¼€å‘çš„æŒ‡å¯¼æ•™ç¨‹
title: Node-REDå¼€å‘ä¸Šæ‰‹æ•™ç¨‹
keywords:
  - Edge
  - reCamera
  - Node-red
  - nodered
image: https://files.seeedstudio.com/wiki/reCamera/develop_with_nodered.webp
slug: /cn/recamera_develop_with_node-red
sidebar_position: 2
last_update:
  date: 03/17/2025
  author: Dawn Yao
---

# ä½¿ç”¨Node-REDå¼€å‘reCamera

## Node-RED ç®€ä»‹

Node-RED çš„ç›®æ ‡æ˜¯è®©ä»»ä½•äººéƒ½èƒ½æ„å»ºåº”ç”¨ç¨‹åºï¼Œç”¨äºæ”¶é›†ã€è½¬æ¢å’Œå¯è§†åŒ–æ•°æ®ï¼Œè¿›è€Œæ„å»ºèƒ½å¤Ÿè‡ªåŠ¨åŒ–å…¶ç”Ÿæ´»çš„åº”ç”¨é…ç½®æµã€‚å…¶ä½ä»£ç ç‰¹æ€§ä½¿å…¶é€‚ç”¨äºå„ç§èƒŒæ™¯çš„ç”¨æˆ·â€”â€”æ— è®ºæ˜¯å®¶åº­è‡ªåŠ¨åŒ–ã€å·¥ä¸šæ§åˆ¶ç³»ç»Ÿè¿˜æ˜¯å…¶ä»–åº”ç”¨ã€‚é€šè¿‡å°† Node-RED ä¸ reCamera é›†æˆï¼Œå®ƒæä¾›äº†ä¸€ç§é€‚åˆåˆå­¦è€…çš„å¼€å‘æ–¹å¼ï¼Œè®©ç”¨æˆ·å¯ä»¥ç›´æ¥æ‹–æ‹½æ“ä½œè®¾å¤‡ã€‚

æ‚¨å¯ä»¥åœ¨è¿™é‡Œäº†è§£ [Node-RED æ¦‚å¿µ](https://nodered.org/docs/user-guide/concepts#:~:text=A%20Flow%20is%20represented%20as,(sets%20of%20connected%20nodes).)  æˆ–è§‚çœ‹ [è§†é¢‘æ•™ç¨‹](https://www.youtube.com/watch?v=DFNv91TTt68) è¿›è¡Œå…¥é—¨ã€‚

åœ¨ reCamera ä¸Šï¼Œæˆ‘ä»¬å·²å®‰è£…äº† Node-RED çš„èŠ‚ç‚¹ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

- SSCMA Palette (æ‰€æœ‰ OS ç‰ˆæœ¬)
- Dashboard Palette (æ‰€æœ‰ OS ç‰ˆæœ¬)
- reCamera Hardware (OS ç‰ˆæœ¬ 0.1.6 åŠä»¥ä¸Š)

å€ŸåŠ© Node-RED é»˜è®¤æä¾›çš„å…¶ä»–èŠ‚ç‚¹ï¼ˆå¦‚ functionã€debugã€triggerã€mqtt ç­‰ï¼‰ï¼Œæ‚¨å¯ä»¥æ„å»ºå„ç§åº”ç”¨é…ç½®æµä»¥å®ç°ä¸åŒçš„è®¡ç®—æœºè§†è§‰åº”ç”¨ã€‚


## å°†åº”ç”¨é…ç½®æµå¯¼å…¥ reCamera

å¯¼å…¥åº”ç”¨é…ç½®æµåˆ° reCamera æœ‰ä¸¤ç§æ–¹å¼ï¼š

### 1. ä»æœ¬åœ°æ–‡ä»¶æˆ– JSON å¯¼å…¥

- **æ­¥éª¤ 1**ï¼šç‚¹å‡»å³ä¸Šè§’çš„ `èœå•å›¾æ ‡` å¹¶é€‰æ‹©`å¯¼å…¥`

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/import_flow_1.png" /></div>

- **æ­¥éª¤ 2**ï¼šç‚¹å‡»`å¯¼å…¥`é€‰é¡¹å¡ 

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/import_flow_2.png" /></div>

- **æ­¥éª¤ 3**ï¼šç²˜è´´åº”ç”¨é…ç½®æµ JSON ä»£ç æˆ–ä¸Šä¼ åº”ç”¨é…ç½®æµ JSON æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨ç¤¾åŒºæˆ– [Github](https://github.com/jby5122/OSHW-reCamera-Series/tree/main/Node-RED_Flow) ä¸Šæ‰¾åˆ°å¯ç”¨çš„åº”ç”¨é…ç½®æµï¼Œå¹¶å°†å®ƒä»¬ä¸ reCamera é›†æˆã€‚

- **æ­¥éª¤ 4**ï¼šç‚¹å‡»`å¯¼å…¥`æŒ‰é’®

###  2. ä» SenseCraft reCamera [å®˜æ–¹è½¯ä»¶å¹³å°](https://sensecraft.seeed.cc/ai/#/recamera) å¯¼å…¥

- **æ­¥éª¤ 1**ï¼šåœ¨å…¬å…±åº”ç”¨ä¸­æ‰¾åˆ°æ„Ÿå…´è¶£çš„åº”ç”¨é…ç½®æµï¼Œç„¶åç‚¹å‡» `å…‹éš†` <div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/sensecraft_clone.png" /></div>
- **æ­¥éª¤ 2**ï¼šé€‰æ‹©é€šè¿‡ USB æˆ–ç½‘ç»œæ–¹å¼è¿æ¥åˆ° reCameraã€‚å¦‚æœä½¿ç”¨ç½‘ç»œè¿æ¥ï¼Œè¯·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ­£ç¡®çš„ reCamera IP åç‚¹å‡»è¿æ¥ã€‚
- **æ­¥éª¤ 3**ï¼šå…¬å…±åº”ç”¨å°†è‡ªåŠ¨å¯¼å…¥åˆ° reCameraã€‚æ‚¨ä¹Ÿå¯ä»¥å°†æ‚¨çš„åº”ç”¨é…ç½®æµè´¡çŒ®ç»™ç¤¾åŒºï¼Œä»¥æ¿€å‘å…¶ä»–ç”¨æˆ·çš„çµæ„Ÿã€‚


## å°†åº”ç”¨é…ç½®æµéƒ¨ç½²åˆ° reCamera

åœ¨å·¥ä½œåŒºä¸­æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹èŠ‚ç‚¹å’Œè¿çº¿åï¼Œè¯·åŠ¡å¿…ç‚¹å‡»å³ä¸Šè§’çš„ `éƒ¨ç½²` æŒ‰é’®ï¼Œå°†æœ€æ–°åº”ç”¨é…ç½®æµéƒ¨ç½²åˆ° reCameraã€‚

## SSCMA èŠ‚ç‚¹

<div align="center"><img width={200} src="https://files.seeedstudio.com/wiki/reCamera/sscma_palette.png" /></div>

`node-red-contrib-sscma` æ˜¯ä¸€ä¸ª Node-RED èŠ‚ç‚¹ç»„ä»¶ï¼Œæ—¨åœ¨é€šè¿‡åŸºäºåº”ç”¨é…ç½®æµçš„ç¼–ç¨‹æ–¹å¼å¿«é€Ÿéƒ¨ç½² AI æ¨¡å‹ã€‚`sscma` æ˜¯ Seeed SenseCraft Model Assistant çš„ç¼©å†™ï¼Œå®ƒå…è®¸ AI æ¨¡å‹çš„è¾“å‡ºä¸å…¶ä»–è®¾å¤‡æ— ç¼é›†æˆï¼Œä»è€Œå®ç°æ™ºèƒ½è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½å·¥ä½œåº”ç”¨é…ç½®æµã€‚

### å®‰è£…

å½“æ‚¨å®‰è£… Node-RED æ—¶ï¼Œè¯¥èŠ‚ç‚¹ä¼šé»˜è®¤å®‰è£…ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨å®‰è£…ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. è®¿é—® Node-RED å·¥ä½œåŒºï¼Œåœ°å€ä¸º `ip_address/#/workspace`ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ `èœå•å›¾æ ‡` å¹¶é€‰æ‹© â€œç®¡ç†èŠ‚ç‚¹â€ã€‚
3. ç‚¹å‡» `å®‰è£…` é€‰é¡¹å¡ã€‚
4. åœ¨æœç´¢æ ä¸­è¾“å…¥ `node-red-contrib-sscma` å¹¶ç‚¹å‡» â€œå®‰è£…â€ æŒ‰é’®ã€‚
5. ç­‰å¾…å®‰è£…å®Œæˆã€‚è¯·æ³¨æ„ï¼Œç”±äºè®¾å¤‡é™åˆ¶ï¼Œä¸‹è½½æ—¶é—´å¯èƒ½ä¼šå› ç½‘ç»œé€Ÿåº¦è€Œåœ¨ 30 ç§’åˆ° 5 åˆ†é’Ÿä¹‹é—´ã€‚


### æ‘„åƒå¤´èŠ‚ç‚¹

<div align="center"><img width={200} src="https://files.seeedstudio.com/wiki/reCamera/camera_node.png" /></div>

è¯¥èŠ‚ç‚¹ç”¨äºå¯ç”¨æ‘„åƒå¤´ï¼Œå¯ç”¨äºæ•æ‰æ‘„åƒå¤´æ¨¡å—çš„è§†é¢‘æµã€‚

#### é…ç½®

å½“æ‚¨é¦–æ¬¡æ‹–æ‹½è¯¥èŠ‚ç‚¹æ—¶ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/add_camera_node.png" /></div>

éŸ³é¢‘é€‰é¡¹è¡¨ç¤ºæ˜¯å¦å¸Œæœ›è§†é¢‘æµåŒ…å«éŸ³é¢‘ï¼Œä¸”éŸ³é‡å¯è°ƒã€‚èŠ‚ç‚¹ä¸Šçš„çº¢è‰²ä¸‰è§’å½¢è¡¨ç¤ºè¯¥èŠ‚ç‚¹éœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯ä¸ä¹‹è¿æ¥ã€‚æ‚¨å¯ä»¥ç‚¹å‡» `æ·»åŠ å›¾æ ‡` æ¥æ·»åŠ  SSCMA å®¢æˆ·ç«¯ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/new_sscma_config_node.png" /></div>

é€‰æ‹©æˆ–æ·»åŠ  SSCMA å®¢æˆ·ç«¯åï¼Œè¯¥é…ç½®èŠ‚ç‚¹åªéœ€è®¾ç½®ä¸€æ¬¡ï¼ˆåç»­å¦‚æ¨¡å‹èŠ‚ç‚¹ç­‰å‡å¯å¤ç”¨ï¼‰ï¼Œçº¢è‰²ä¸‰è§’å½¢ä¹Ÿä¼šæ¶ˆå¤±ã€‚

#### è¾“å…¥å’Œè¾“å‡º

æ‚¨å¯ä»¥é€šè¿‡ä¼ å…¥ `msg.enabled = true` æˆ– `msg.enabled = false` æ¥æ§åˆ¶æ‘„åƒå¤´çš„å¼€å…³ã€‚ä¾‹å¦‚ï¼Œå¯ç»“åˆæ—¶é—´è§¦å‘èŠ‚ç‚¹åœ¨ç‰¹å®šæ—¶é—´å¯ç”¨æ‘„åƒå¤´ï¼Œå®ç°èŠ‚èƒ½ï¼ˆä»…é€‚ç”¨äº OS ç‰ˆæœ¬ 0.1.5 åŠä»¥ä¸Šï¼‰ã€‚
 æ‘„åƒå¤´èŠ‚ç‚¹å¯ä»¥ä¸ `stream` èŠ‚ç‚¹ï¼ˆç”¨äº RTSPï¼‰ã€`preview` èŠ‚ç‚¹æˆ– `model` èŠ‚ç‚¹ï¼ˆç”¨äºè®¡ç®—æœºè§†è§‰å¤„ç†ï¼‰è¿æ¥ã€‚


### æ¨¡å‹èŠ‚ç‚¹

è¯¥èŠ‚ç‚¹ä½¿ reCamera èƒ½å¤ŸåŠ è½½ä¸åŒçš„è§†è§‰ AI æ¨¡å‹ï¼ˆä¾‹å¦‚ Yoloï¼‰ï¼Œå¹¶è°ƒæ•´æ¨¡å‹å‚æ•°ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/model_node.png" /></div>

#### é…ç½®

åŒæ ·ï¼Œè¯·ä¸ºå®¢æˆ·ç«¯é€‰æ‹© `sscma`ã€‚é€‰æ‹©åçº¢è‰²ä¸‰è§’å½¢ä¼šæ¶ˆå¤±ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/select_sscma_node.png" /></div>

#### æ¨¡å‹é€‰æ‹©

åœ¨ reCamera ä¸Šéƒ¨ç½²ä¸åŒæ¨¡å‹æœ‰ä¸‰ç§æ–¹å¼ï¼š

1. **é€‰æ‹©â€œè®¾å¤‡å†…â€æ¨¡å‹**ã€‚reCamera é»˜è®¤å†…ç½®äº†å‡ ä¸ª Yolo æ¨¡å‹ï¼Œè¯¦è§ [é»˜è®¤æ¨¡å‹](https://wiki.seeedstudio.com/recamera_on_device_models)ã€‚
2. **ä» `SenseCraft Zoo` ä¸­é€‰æ‹©æ¨¡å‹**ã€‚æœ‰å¤šä¸ªå…¬å…±æ¨¡å‹å¯ä¾›é€‰æ‹©ï¼Œå¦‚æ‰‹åŠ¿ã€æœè”¬ç­‰ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸Šä¼ è‡ªå·±çš„æ¨¡å‹ï¼Œå¹¶å°†å…¶å…¬å¼€è´¡çŒ®ç»™ç¤¾åŒºã€‚
3. **ä¸Šä¼ æ‚¨è‡ªå·±çš„æ¨¡å‹**ã€‚æŒ‰ç…§ å°†æ¨¡å‹è½¬æ¢ä¸º reCamera æ ¼å¼ çš„è¯´æ˜ï¼Œç”¨æˆ·å¯ä»¥å°†è‡ªå·±çš„ AI æ¨¡å‹è½¬æ¢ä¸º INT8 cvimodel æ ¼å¼ï¼Œä»¥é€‚é… reCameraã€‚ä¸Šä¼ åï¼Œè¯·åœ¨ `Labels` å­—æ®µä¸­åˆ—å‡ºæ¨¡å‹çš„æ‰€æœ‰ç±»åˆ«ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/model_classes.png" /></div>

#### æ¨¡å‹å‚æ•°

- **Confidence æ»‘å—**ï¼šç”¨äºè®¾ç½® AI æ¨¡å‹çš„ç½®ä¿¡åº¦ã€‚ç½®ä¿¡åº¦è¡¨ç¤ºæ¨¡å‹å¯¹æŸä¸ªé¢„æµ‹çš„æ¦‚ç‡æˆ–ç¡®å®šæ€§ï¼ŒèŒƒå›´ä¸º 0 åˆ° 1ï¼Œå€¼è¶Šé«˜ï¼Œæ¨¡å‹è¿‡æ»¤ä½ç½®ä¿¡é¢„æµ‹çš„èƒ½åŠ›è¶Šå¼ºã€‚
- **IoU æ»‘å—**ï¼šç”¨äºè®¾ç½® AI æ¨¡å‹çš„ IoUã€‚IoU è¡¡é‡ç›®æ ‡æ£€æµ‹ä¸­é¢„æµ‹è¾¹ç•Œæ¡†ä¸çœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„é‡å ç¨‹åº¦ï¼Œå…¶å€¼åœ¨ 0 åˆ° 1 ä¹‹é—´ï¼Œ0 è¡¨ç¤ºå®Œå…¨ä¸é‡å ï¼Œ1 è¡¨ç¤ºå®Œå…¨åŒ¹é…ã€‚è¾ƒé«˜çš„ IoU é˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.5 æˆ– 0.7ï¼‰è¡¨ç¤ºå¯¹æ£€æµ‹å‡†ç¡®æ€§è¦æ±‚æ›´é«˜ã€‚

#### è¾“å‡º

- **base64 image output å¤é€‰æ¡†**ï¼šè®¾ç½®æ˜¯å¦è¾“å‡ºåŒ…å«å…¶ä»–å‚æ•°çš„ base64 å›¾ç‰‡ä»£ç ã€‚
- **Trace å¤é€‰æ¡†**ï¼šå¯ç”¨è¿½è¸ªæ¨¡å¼ï¼Œå¼€å¯åæ£€æµ‹å¯¹è±¡ä¼šåˆ†é…å”¯ä¸€ IDã€‚
- **Counting å¤é€‰æ¡†**ï¼šå¯ç”¨è®¡æ•°æ¨¡å¼ï¼Œå¼€å¯åèŠ‚ç‚¹ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè®¡æ•°ä¿¡æ¯ã€‚
- **Splitter å­—æ®µ**ï¼šç”¨äºè®¾ç½®è®¡æ•°çº¿ï¼Œåœ¨è¯¥åŒºåŸŸå†…ç»˜åˆ¶ä»»æ„çº¿æ¡ï¼Œç»Ÿè®¡ç©¿è¿‡è¯¥çº¿çš„å¯¹è±¡æ•°é‡ã€‚

å°†æ¨¡å‹èŠ‚ç‚¹è¿æ¥åˆ° debug èŠ‚ç‚¹å³å¯æŸ¥çœ‹è¾“å‡ºã€‚
 ä¾‹å¦‚ï¼ŒYolo 11n çš„è¾“å‡ºå¯¹è±¡ç¤ºä¾‹å¦‚ä¸‹ï¼š

```bash
{
  boxes: [
    0: box_center_x,
    1: box_center_y,
    2: box_width,
    3: box_height,
    4: detected object score,
    5: detected object class ID,
  ],
  count: //inference numbers ,
  image: //base64 image code,
  labels: [
    0: class name // e.g. person
  ],
  perf: [
    0: 0 fps, //pre-processing fps
    1: 40 ms, //inference time
    2: 20 ms, //post-processing time
  ],
  resolution: [ //pixel size of the image
    0: 640,
    1: 640,
  ]
}
```

æ¨¡å‹èŠ‚ç‚¹è¿˜å¯ä»¥è¿æ¥åˆ° `preview` èŠ‚ç‚¹ï¼Œåœ¨ Node-RED å·¥ä½œåŒºå†…é¢„è§ˆæ•ˆæœï¼Œæˆ–å°†è¾“å‡ºä¼ é€’ç»™å…¶ä»–èŠ‚ç‚¹ï¼ˆå¦‚ functionã€mqttã€debug æˆ– Dashboard UI Palette ä¸­çš„å…¶ä»–èŠ‚ç‚¹ï¼‰è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚



### é¢„è§ˆèŠ‚ç‚¹

è¯¥èŠ‚ç‚¹ç”¨äºé¢„è§ˆæ‘„åƒå¤´æ¨¡å—çš„è§†é¢‘æµã€‚æ‚¨å¯ä»¥é€šè¿‡ç»¿è‰²å¼€å…³å¯ç”¨æˆ–ç¦ç”¨é¢„è§ˆã€‚è¯·æ³¨æ„ï¼Œç”±äºè®¾å¤‡ CPU é™åˆ¶ï¼Œ**è¯·å‹¿**åŒæ—¶æ‹–å‡ºè¿‡å¤šçš„é¢„è§ˆå’Œè°ƒè¯•èŠ‚ç‚¹ï¼Œå¦åˆ™æ‰“å°å¤§é‡è°ƒè¯•ä¿¡æ¯ä¼šå¢åŠ  CPU è´Ÿè½½ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/preview_node.png" /></div>



### æµåª’ä½“èŠ‚ç‚¹

è¯¥èŠ‚ç‚¹ç”¨äºå°†æ‘„åƒå¤´æ¨¡å—çš„è§†é¢‘æµä¼ è¾“åˆ°æœåŠ¡å™¨ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/stream_node.png" /></div>

#### é…ç½®

åŒæ ·ï¼Œè¯·ä¸ºå®¢æˆ·ç«¯é€‰æ‹© `sscma`ã€‚é€‰æ‹©åçº¢è‰²ä¸‰è§’å½¢ä¼šæ¶ˆå¤±ã€‚

#### è¾“å…¥å’Œè¾“å‡º

- **è¾“å…¥**ï¼šå°† `camera` èŠ‚ç‚¹è¿æ¥åˆ° `stream` èŠ‚ç‚¹ä»¥å¯ç”¨æµåª’ä½“ä¼ è¾“ã€‚

- è¾“å‡º

  ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ VLC ç­‰åº”ç”¨ç¨‹åºæŸ¥çœ‹ reCamera è¾“å‡ºçš„ RTSP æµã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šè¿°æˆªå›¾ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨ VLC ä¸­ä½¿ç”¨ 

  ```bash
  rtsp://admin:admin@192.168.42.1:554/live
  ```

  ï¼Œä»è€Œçœ‹åˆ° H.264 è§†é¢‘æµã€‚

  - **è§†é¢‘å‚æ•°**ï¼šé»˜è®¤åˆ†è¾¨ç‡ä¸º 1920 Ã— 1800ï¼Œ30fpsã€‚
  - **å»¶è¿Ÿ**ï¼šå…·ä½“å–å†³äºç»ˆç«¯åº”ç”¨ï¼Œä¾‹å¦‚ VLC å»¶è¿Ÿçº¦ 500 æ¯«ç§’ã€‚


### ä¿å­˜èŠ‚ç‚¹

è¯¥èŠ‚ç‚¹ç”¨äºä¿å­˜æ‘„åƒå¤´æ¨¡å—çš„è§†é¢‘æµã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/save_node.png" /></div>

#### é…ç½®

åŒæ ·ï¼Œè¯·ä¸ºå®¢æˆ·ç«¯é€‰æ‹© `sscma`ã€‚é€‰æ‹©åçº¢è‰²ä¸‰è§’å½¢ä¼šæ¶ˆå¤±ã€‚

#### è¾“å…¥

å°† `camera` èŠ‚ç‚¹è¿æ¥åˆ° `save` èŠ‚ç‚¹ä»¥å¯ç”¨ä¿å­˜åŠŸèƒ½ã€‚

#### ä¿å­˜å‚æ•°

- **å­˜å‚¨æ–¹å¼**ï¼š

  - æœ¬åœ° â†’ è·¯å¾„ï¼š`recamera/userdata/VIDEO`
  - å¤–éƒ¨ â†’ å­˜å‚¨åœ¨ SD å¡ä¸­

  <div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/save_node_storage.png" /></div>

- **Start å¤é€‰æ¡†**ï¼šå‹¾é€‰åï¼Œä¿å­˜å°†ç«‹å³å¼€å§‹ï¼Œä¿å­˜å‚æ•°ä¾æ®ä¸‹é¢çš„ `slice` å’Œ `duration` è®¾ç½®ã€‚

- **Slice**ï¼šæ¯ä¸ªä¿å­˜æ–‡ä»¶çš„è§†é¢‘æ—¶é•¿ã€‚ï¼ˆåœ¨ 0.1.6 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œå¯åœ¨ä¸‹æ‹‰èœå•ä¸­æ›´æ”¹å•ä½ï¼‰

- **Duration**ï¼šè¦ä¿å­˜çš„è§†é¢‘æ€»æ—¶é•¿ã€‚ï¼ˆåœ¨ 0.1.6 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œå¯åœ¨ä¸‹æ‹‰èœå•ä¸­æ›´æ”¹å•ä½ï¼‰

ä¾‹å¦‚ï¼Œå¦‚æœå°† slice è®¾ç½®ä¸º 5 åˆ†é’Ÿï¼Œduration è®¾ç½®ä¸º 1 å°æ—¶ï¼Œåˆ™è§†é¢‘å°†è¢«ä¿å­˜ä¸º 12 ä¸ª 5 åˆ†é’Ÿçš„è§†é¢‘æ–‡ä»¶ã€‚



### SSCMA èŠ‚ç‚¹ç¤ºä¾‹åº”ç”¨é…ç½®æµ

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/example_flow.png" /></div>

è¯¥åº”ç”¨é…ç½®æµä½¿ç”¨ Yolo 11n æ£€æµ‹æ¨¡å‹ï¼Œåœ¨å·¥ä½œåŒºé¢„è§ˆæ£€æµ‹åˆ°çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡ RTSP ä¼ è¾“åŸå§‹è§†é¢‘æµï¼š

```json

[{"id":"d72dbb768278d92b","type":"tab","label":"Flow 1","disabled":false,"info":"","env":[]},{"id":"291219139b4904ee","type":"sscma","host":"localhost","mqttport":"1883","apiport":"80","clientid":"recamera","username":"","password":""},{"id":"7ee52cad4723fbee","type":"camera","z":"d72dbb768278d92b","option":0,"client":"291219139b4904ee","audio":true,"volume":80,"x":120,"y":220,"wires":[["09b5621ae3fa9d71","0fcaef819aa764e6"]]},{"id":"09b5621ae3fa9d71","type":"model","z":"d72dbb768278d92b","name":"","uri":"/usr/share/supervisor/models/yolo11n_detection_cv181x_int8.cvimodel","model":"YOLO11n Detection","tscore":0.45,"tiou":0.25,"debug":false,"trace":false,"counting":false,"classes":"person,bicycle,car,motorcycle,airplane,bus,train,truck,boat,traffic light,fire hydrant,stop sign,parking meter,bench,bird,cat,dog,horse,sheep,cow,elephant,bear,zebra,giraffe,backpack,umbrella,handbag,tie,suitcase,frisbee,skis,snowboard,sports ball,kite,baseball bat,baseball glove,skateboard,surfboard,tennis racket,bottle,wine glass,cup,fork,knife,spoon,bowl,banana,apple,sandwich,orange,broccoli,carrot,hot dog,pizza,donut,cake,chair,couch,potted plant,bed,dining table,toilet,tv,laptop,mouse,remote,keyboard,cell phone,microwave,oven,toaster,sink,refrigerator,book,clock,vase,scissors,teddy bear,hair drier,toothbrush","splitter":"0,0,0,0","client":"291219139b4904ee","x":270,"y":220,"wires":[["9a4aacf197bedbaa"]]},{"id":"9a4aacf197bedbaa","type":"preview","z":"d72dbb768278d92b","name":"","active":true,"pass":false,"outputs":0,"x":440,"y":220,"wires":[]},{"id":"0fcaef819aa764e6","type":"stream","z":"d72dbb768278d92b","name":"stream","protocol":0,"port":554,"session":"live","username":"admin","password":"admin","client":"291219139b4904ee","x":270,"y":300,"wires":[]}]
```


## Dashboard UI èŠ‚ç‚¹

ç”± ***Flowfuse*** åˆ¶ä½œçš„ [***Dashboard 2.0 èŠ‚ç‚¹***](https://dashboard.flowfuse.com/getting-started.html) æ˜¯åŸºäº Dashboard 1.0 èŠ‚ç‚¹å¼€å‘çš„ï¼ˆå‘ä»–ä»¬è‡´æ•¬ï¼Œæ„Ÿè°¢ä»–ä»¬çš„å‡ºè‰²å·¥ä½œï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ Node-RED èŠ‚ç‚¹é›†åˆï¼Œå¯å¸®åŠ©æ‚¨åˆ›å»ºæ•°æ®é©±åŠ¨çš„ä»ªè¡¨æ¿å’Œæ•°æ®å¯è§†åŒ–ã€‚å€ŸåŠ©è¯¥èŠ‚ç‚¹ï¼Œæ‚¨å¯ä»¥æ„å»ºåœ¨ reCamera ä¸Šç›´æ¥è¿è¡Œçš„äº¤äº’å¼ä»ªè¡¨æ¿ï¼ŒåŒ…å«æŒ‰é’®ã€å›¾è¡¨ã€æ–‡æœ¬ã€æ»‘å—åŠé¢„è§ˆæ•ˆæœç­‰ç»„ä»¶ã€‚

### å®‰è£…

è¯¥èŠ‚ç‚¹åœ¨è®¾å¤‡ä¸Šé»˜è®¤å®‰è£…ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨å®‰è£…ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. è®¿é—® Node-RED å·¥ä½œåŒºï¼Œåœ°å€ä¸º `ip_address/#/workspace`ã€‚
2. ç‚¹å‡»å³ä¸Šè§’çš„ `èœå•å›¾æ ‡` å¹¶é€‰æ‹© â€œç®¡ç†èŠ‚ç‚¹â€ã€‚
3. ç‚¹å‡» â€œå®‰è£…â€ é€‰é¡¹å¡ã€‚
4. åœ¨æœç´¢æ ä¸­è¾“å…¥ `node-red-contrib-sscma` å¹¶ç‚¹å‡» â€œå®‰è£…â€ æŒ‰é’®ã€‚
5. ç­‰å¾…å®‰è£…å®Œæˆã€‚è¯·æ³¨æ„ï¼Œç”±äºè®¾å¤‡é™åˆ¶ï¼Œä¸‹è½½æ—¶é—´å¯èƒ½å› ç½‘ç»œé€Ÿåº¦å’Œè½¯ä»¶åŒ…å¤§å°è€Œåœ¨ 30 ç§’åˆ° 5 åˆ†é’Ÿä¹‹é—´ã€‚

### ä»ªè¡¨æ¿èŠ‚ç‚¹

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/dashboard_nodes_docs.png" /></div>

å¸¸ç”¨èŠ‚ç‚¹å¦‚ `button`ã€`slider`ã€`switch`ã€`text` å’Œ `template` åœ¨æ„å»º reCamera ä»ªè¡¨æ¿æ—¶éå¸¸å®ç”¨ã€‚æ‚¨å¯ä»¥åœ¨å®ƒä»¬çš„ [å®˜æ–¹æ–‡æ¡£](https://dashboard.flowfuse.com/nodes/widgets/ui-button.html) æŸ¥çœ‹å„èŠ‚ç‚¹è¯¦ç»†è¯´æ˜ï¼Œæˆ–è§‚çœ‹ [åˆå­¦è€…æ•™ç¨‹](https://youtu.be/DFNv91TTt68?si=HjTSh1G8xgCBF0jS) æ›´å¥½åœ°äº†è§£è¯¥èŠ‚ç‚¹ä¸­çš„èŠ‚ç‚¹å’Œç»„ä»¶ã€‚

### å¸¦æœ‰ä»ªè¡¨æ¿èŠ‚ç‚¹çš„ç¤ºä¾‹åº”ç”¨é…ç½®æµ

å¯¹äº OS ç‰ˆæœ¬ 0.1.4 åŠä»¥ä¸Šï¼Œè®¾å¤‡ä¸Šé»˜è®¤å®‰è£…äº†ä¸€ä¸ªä»ªè¡¨æ¿åº”ç”¨é…ç½®æµï¼Œä½œä¸ºå¼€ç®±ç¤ºä¾‹ä¾›ç”¨æˆ·å…¥é—¨ã€‚ä½äº 0.1.4 çš„ OS ç‰ˆæœ¬åˆ™æ²¡æœ‰é»˜è®¤ä»ªè¡¨æ¿åº”ç”¨é…ç½®æµã€‚
 è¯¥åº”ç”¨é…ç½®æµåŠŸèƒ½åŒ…æ‹¬é¢„è§ˆæ¨¡å‹è¾“å‡ºã€æä¾›è®¡æ•°ï¼ˆå¦‚è®¡æ•°äººã€ç‹—ã€çŒ«æˆ–ç“¶å­ï¼‰ç­‰æ¼”ç¤ºï¼ŒåŒæ—¶ä¹Ÿå±•ç¤ºäº†å¦‚ä½•å°†åŸºæœ¬ç½‘é¡µï¼ˆå¦‚ç½‘ç»œã€ç»ˆç«¯ã€SSH é¡µé¢åŠè®¾å¤‡ä¿¡æ¯ï¼šCPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µç­‰ï¼‰åµŒå…¥åˆ°ä»ªè¡¨æ¿ä¸­ã€‚

<div align="center"><img width={600} src="https://files.seeedstudio.com/wiki/reCamera/dashboard_example.png" /></div>

åœ¨æ­¤ä»ªè¡¨æ¿ä¸­ï¼Œä½¿ç”¨äº†ä»¥ä¸‹èŠ‚ç‚¹ï¼š

- **slider èŠ‚ç‚¹**ï¼šç”¨äºæ§åˆ¶æ¨¡å‹çš„ç½®ä¿¡åº¦å’Œ IoUã€‚
- **dropdown èŠ‚ç‚¹**ï¼šç”¨äºé€‰æ‹©æ¼”ç¤ºã€‚
- **text èŠ‚ç‚¹**ï¼šç”¨äºæ˜¾ç¤ºæ¨¡å‹åç§°åŠéƒ¨åˆ†æ–‡æœ¬ä¿¡æ¯ã€‚
- **template èŠ‚ç‚¹**ï¼šç”¨äºæ¸²æŸ“ base64 å›¾ç‰‡ä»£ç å¹¶ç»˜åˆ¶å›¾åƒè¾¹ç•Œæ¡†ã€‚
- **function èŠ‚ç‚¹**ï¼šç”¨äºè§£ææ¨¡å‹èŠ‚ç‚¹çš„è¾“å‡ºä¼ é€’ç»™ template èŠ‚ç‚¹ï¼Œå¹¶ä¸ºå…¶ä»–èŠ‚ç‚¹æ·»åŠ é€»è¾‘ã€‚

è¯¥åº”ç”¨é…ç½®æµçš„ JSON å¦‚ä¸‹ï¼š

```json

[{"id":"35ee92b6dbd194c1","type":"tab","label":"Dashboard","disabled":false,"info":"","env":[]},{"id":"39f2b91c983d671f","type":"subflow","name":"Device Info Pages","info":"","category":"sscma","in":[],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"13a0b285aa95568e","type":"subflow","name":"Default Pages","info":"","category":"sscma","in":[],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"dec794eaeb95589c","type":"sscma","host":"localhost","mqttport":"1883","apiport":"80","clientid":"recamera","username":"","password":""},{"id":"9ab1ee429e233a80","type":"ui-base","name":"My Dashboard","path":"/dashboard","appIcon":"","includeClientData":true,"acceptsClientConfig":["ui-notification","ui-control"],"showPathInSidebar":false,"showPageTitle":true,"navigationStyle":"default","titleBarStyle":"default","showReconnectNotification":true,"notificationDisplayTime":1,"showDisconnectNotification":true},{"id":"866ca6b212de07b4","type":"ui-theme","name":"Default Theme","colors":{"surface":"#ffffff","primary":"#0094CE","bgPage":"#eeeeee","groupBg":"#ffffff","groupOutline":"#cccccc"},"sizes":{"density":"default","pagePadding":"12px","groupGap":"12px","groupBorderRadius":"4px","widgetGap":"12px"}},{"id":"234998f63c55af55","type":"ui-theme","name":"Default Theme","colors":{"surface":"#ffffff","primary":"#0094ce","bgPage":"#eeeeee","groupBg":"#ffffff","groupOutline":"#cccccc"},"sizes":{"density":"default","pagePadding":"12px","groupGap":"12px","groupBorderRadius":"4px","widgetGap":"12px"}},{"id":"2788be32a24982e1","type":"ui-page","name":"Network","ui":"9ab1ee429e233a80","path":"/network","icon":"wifi","layout":"grid","theme":"234998f63c55af55","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":2,"className":"","visible":true,"disabled":false},{"id":"15bec593c23e2df1","type":"ui-group","name":"Wi-Fi","page":"2788be32a24982e1","width":"12","height":"1","order":1,"showTitle":false,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"034b986fab50b7bb","type":"ui-page","name":"Device Info","ui":"9ab1ee429e233a80","path":"/Deviceinfo","icon":"cog","layout":"grid","theme":"234998f63c55af55","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":3,"className":"","visible":"true","disabled":"false"},{"id":"cb81f9d78a6a3513","type":"ui-group","name":"Memory","page":"034b986fab50b7bb","width":"6","height":"1","order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"35ddf11ddd1ade60","type":"ui-group","name":"Load","page":"034b986fab50b7bb","width":"6","height":"1","order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8ee7b1867c318ca3","type":"ui-group","name":"Storage","page":"034b986fab50b7bb","width":"6","height":"1","order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"4b590614656223c2","type":"ui-page","name":"Security","ui":"9ab1ee429e233a80","path":"/security","icon":"security","layout":"grid","theme":"234998f63c55af55","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":4,"className":"","visible":"true","disabled":"false"},{"id":"d3e7dcd4b2447549","type":"ui-page","name":"Terminal","ui":"9ab1ee429e233a80","path":"/terminal","icon":"console","layout":"grid","theme":"234998f63c55af55","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":5,"className":"","visible":true,"disabled":false},{"id":"7f84e6e11f01d5aa","type":"ui-group","name":"Security","page":"4b590614656223c2","width":"12","height":"1","order":1,"showTitle":false,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"62e3f90362f475e5","type":"ui-group","name":"Terminal","page":"d3e7dcd4b2447549","width":"12","height":"1","order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"eb4ea4ad231b87b6","type":"ui-page","name":"Preview","ui":"9ab1ee429e233a80","path":"/preview","icon":"home","layout":"grid","theme":"234998f63c55af55","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":1,"className":"","visible":"true","disabled":"false"},{"id":"853d93c4c0f19c38","type":"ui-group","name":"Power","page":"034b986fab50b7bb","width":"6","height":"1","order":5,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"a2f6b486b575c329","type":"ui-group","name":"Sys Info","page":"034b986fab50b7bb","width":"6","height":"1","order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"53a493606ee6d430","type":"ui-group","name":"Preview","page":"eb4ea4ad231b87b6","width":"6","height":"1","order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"d9c66abde84c734d","type":"ui-group","name":"Model Selection","page":"eb4ea4ad231b87b6","width":"6","height":"1","order":2,"showTitle":false,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"0403368ef716b66e","type":"ui-spacer","group":"d9c66abde84c734d","name":"spacer","tooltip":"","order":5,"width":"2","height":"1","className":""},{"id":"f55b8c3e9a243e2d","type":"ui-page","name":"DisplayNone","ui":"9ab1ee429e233a80","path":"/page6","icon":"home","layout":"grid","theme":"866ca6b212de07b4","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":6,"className":"","visible":"false","disabled":"false"},{"id":"56e94a4a52495b4e","type":"ui-group","name":"Hidden","page":"f55b8c3e9a243e2d","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":false,"disabled":"false","groupType":"default"},{"id":"9ca150fa0779ddf5","type":"inject","z":"39f2b91c983d671f","name":"update","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"30","crontab":"","once":true,"onceDelay":"","topic":"","payload":"","payloadType":"date","x":240,"y":320,"wires":[["a7f51d25943cec64","b27627174b2cb1ac","91b465681153a8a9","8614287768526732","eec7b34928fa4d5e","32570c230c544e73"]]},{"id":"92d7c90757d47543","type":"function","z":"39f2b91c983d671f","name":"","func":"msg.payload = msg.payload.memusage;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":626,"y":655,"wires":[["d01cf18989f42d3c"]]},{"id":"3483b24989d032a3","type":"function","z":"39f2b91c983d671f","name":"","func":"function formatBytes(bytes,decimals) {\n   if(bytes === 0) return '0 Byte';\n   var k = 1000; // or 1024 for binary\n   var dm = decimals + 1 || 3;\n   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n   var i = Math.floor(Math.log(bytes) / Math.log(k));\n   return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nmsg.payload = formatBytes(msg.payload.totalmem);\nreturn msg;","outputs":1,"noerr":0,"x":626,"y":695,"wires":[["f72a3db98afc3b6c"]]},{"id":"507876942fdfea09","type":"function","z":"39f2b91c983d671f","name":"","func":"function formatBytes(bytes,decimals) {\n   if(bytes === 0) return '0 Byte';\n   var k = 1000; // or 1024 for binary\n   var dm = decimals + 1 || 3;\n   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n   var i = Math.floor(Math.log(bytes) / Math.log(k));\n   return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nmsg.payload = formatBytes(msg.payload.freemem);\nreturn msg;","outputs":1,"noerr":0,"x":626,"y":735,"wires":[["7345921066c58fa5"]]},{"id":"47c24b2506364a5a","type":"function","z":"39f2b91c983d671f","name":"","func":"function timeConversion(millisec) {\n\n    var seconds = (millisec / 1000).toFixed(1);\n\n    var minutes = (millisec / (1000 * 60)).toFixed(1);\n\n    var hours = (millisec / (1000 * 60 * 60)).toFixed(1);\n\n    var days = (millisec / (1000 * 60 * 60 * 24)).toFixed(1);\n\n    if (seconds < 60) {\n        return seconds + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes + \" Min\";\n    } else if (hours < 24) {\n        return hours + \" Hrs\";\n    } else {\n        return days + \" Days\"\n    }\n}\n\nmsg.payload = timeConversion(msg.payload.uptime * 1000);\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":607,"y":155,"wires":[["1ad12d7370576a43"]]},{"id":"d204a0af6bfd434e","type":"function","z":"39f2b91c983d671f","name":"","func":"msg.payload = msg.payload.hostname;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":606,"y":192,"wires":[["36bb8d5e6bdd8744"]]},{"id":"5477c749de145490","type":"function","z":"39f2b91c983d671f","name":"","func":"msg.payload = msg.payload.platform;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":608,"y":230,"wires":[["86b895252ee31204"]]},{"id":"daa940d746ec2bef","type":"function","z":"39f2b91c983d671f","name":"","func":"msg.payload = msg.payload.arch;\nreturn msg;","outputs":1,"noerr":0,"x":609,"y":269,"wires":[["7a714543abc3b9be"]]},{"id":"a6149aba5c0badd3","type":"function","z":"39f2b91c983d671f","name":"","func":"msg.payload = msg.payload.memusage;\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":626,"y":615,"wires":[["91f21350c7e1df8b"]]},{"id":"3174c5a734aa1d2f","type":"comment","z":"39f2b91c983d671f","name":"Memory Usage","info":"","x":826,"y":575,"wires":[]},{"id":"7ec11bb31e97fa06","type":"comment","z":"39f2b91c983d671f","name":"System Information","info":"","x":836,"y":95,"wires":[]},{"id":"91f21350c7e1df8b","type":"ui-chart","z":"39f2b91c983d671f","group":"cb81f9d78a6a3513","name":"Memory - 24 Hours","label":"24 Hours","order":4,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"HH:mm:ss","xmin":"","xmax":"","yAxisLabel":"%","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"","ymax":"","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":1,"removeOlderUnit":"86400","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":8,"className":"","interpolation":"linear","x":836,"y":615,"wires":[[]]},{"id":"d01cf18989f42d3c","type":"ui-gauge","z":"39f2b91c983d671f","name":"Memory Usage","group":"cb81f9d78a6a3513","order":1,"width":3,"height":3,"gtype":"gauge-half","gstyle":"rounded","title":"1 Minute","units":"Usage","icon":"memory","prefix":"","suffix":"%","segments":[{"from":"0","color":"#5cd65c"},{"from":"40","color":"#ffc800"},{"from":"70","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":826,"y":655,"wires":[]},{"id":"f72a3db98afc3b6c","type":"ui-text","z":"39f2b91c983d671f","group":"cb81f9d78a6a3513","order":3,"width":0,"height":0,"name":"Total Memory","label":"Total Memory","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":826,"y":695,"wires":[]},{"id":"7345921066c58fa5","type":"ui-text","z":"39f2b91c983d671f","group":"cb81f9d78a6a3513","order":2,"width":0,"height":0,"name":"Free Memory","label":"Free Memory","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":816,"y":735,"wires":[]},{"id":"1ad12d7370576a43","type":"ui-text","z":"39f2b91c983d671f","group":"a2f6b486b575c329","order":1,"width":0,"height":0,"name":"Uptime","label":"Uptime","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":806,"y":155,"wires":[]},{"id":"36bb8d5e6bdd8744","type":"ui-text","z":"39f2b91c983d671f","group":"a2f6b486b575c329","order":5,"width":0,"height":0,"name":"Hostname","label":"Hostname","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":816,"y":195,"wires":[]},{"id":"86b895252ee31204","type":"ui-text","z":"39f2b91c983d671f","group":"a2f6b486b575c329","order":4,"width":0,"height":0,"name":"Platform","label":"Platform","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":801,"y":242,"wires":[]},{"id":"7a714543abc3b9be","type":"ui-text","z":"39f2b91c983d671f","group":"a2f6b486b575c329","order":2,"width":0,"height":0,"name":"Arch","label":"Arch","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":791,"y":282,"wires":[]},{"id":"eec7b34928fa4d5e","type":"exec","z":"39f2b91c983d671f","command":"top -d 0.5 -b -n2 | grep \"Cpu(s)\"|tail -n 1 | awk '{print ($2 + $4) / 100}'","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"CPU Load","x":476,"y":435,"wires":[["76a3d21caa20cc2a","e75401352787eeb2"],[],[]]},{"id":"04cc577099c60653","type":"comment","z":"39f2b91c983d671f","name":"CPU Load","info":"","x":806,"y":395,"wires":[]},{"id":"76a3d21caa20cc2a","type":"ui-gauge","z":"39f2b91c983d671f","name":"CPU","group":"35ddf11ddd1ade60","order":1,"width":3,"height":3,"gtype":"gauge-half","gstyle":"rounded","title":"CPU","units":"Usage","icon":"cpu-64-bit","prefix":"","suffix":"%","segments":[{"from":"0","color":"#5cd65c"},{"from":"40","color":"#ffc800"},{"from":"70","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":796,"y":435,"wires":[]},{"id":"e75401352787eeb2","type":"ui-chart","z":"39f2b91c983d671f","group":"35ddf11ddd1ade60","name":"CPU Load%","label":"CPU Load%","order":2,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"HH:mm:ss","xmin":"","xmax":"","yAxisLabel":"%","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"","ymax":"","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":8,"className":"","interpolation":"linear","x":816,"y":475,"wires":[[]]},{"id":"32570c230c544e73","type":"exec","z":"39f2b91c983d671f","command":"df -h","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"Disk Usage","x":436,"y":855,"wires":[["b1b81c47791b54f8"],[],[]]},{"id":"b1b81c47791b54f8","type":"function","z":"39f2b91c983d671f","name":"function 3","func":"// Input payload as a string\nlet data = msg.payload;\n\n// Split the input into lines\nlet lines = data.split('\\n');\n\n// Initialize variables\nlet totalSize = 0;       // Total space size in GB\nlet totalUsed = 0.256;       // Used space in GB\nlet totalAvailable = 0;   // Available space in GB\n\n// Updated regex to match both MB and GB, and all filesystem types\nlet regex = /(\\S+)\\s+([\\d.]+)([MKG]?)\\s+([\\d.]+)([MKG]?)\\s+([\\d.]+)([MKG]?)\\s+(\\d+)%/;\n\n// Function to convert MB to GB\nfunction mbToGb(value, unit) {\n    switch (unit) {\n        case 'G':\n            return value;\n        case 'M':\n            return value / 1024;\n        case 'K':\n            return value / 1024 / 1024;\n        default:\n            return 0;\n    }\n}\n\n// Iterate through each line and sum the values\nfor (let line of lines) {\n    let match = line.match(regex);\n\n    if (match && (match[1] === \"/dev/root\" || match[1] === \"/dev/mmcblk0p6\")) {\n        // Extract values and units\n        let size = parseFloat(match[2]);\n        let sizeUnit = match[3];\n        let used = parseFloat(match[4]);\n        let usedUnit = match[5];\n        let available = parseFloat(match[6]);\n        let availUnit = match[7];\n        \n        // Convert all values to GB\n        totalSize += mbToGb(size, sizeUnit);\n        totalUsed += mbToGb(used, usedUnit);\n        totalAvailable += mbToGb(available, availUnit);\n    }\n}\n// Format the results to two decimal places\n// totalSize = totalSize.toFixed(2);         \ntotalUsed = totalUsed.toFixed(2);       \ntotalAvailable = totalAvailable.toFixed(2); \ntotalSize = (Number(totalUsed) + Number(totalAvailable)).toFixed(2);         \n\n// Calculate used and free percentages\nlet usedPercentage = ((totalUsed / totalSize) * 100).toFixed(2);\nlet freePercentage = ((totalAvailable / totalSize) * 100).toFixed(2);\n\n// Create different messages for each output\nlet output1 = { payload: totalSize };           // Total size in GB\nlet output2 = { payload: totalUsed };            // Used space in GB\nlet output3 = { payload: totalAvailable };       // Available space in GB\nlet output4 = { payload: usedPercentage };       // Used percentage\nlet output5 = { payload: freePercentage };       // Free percentage\n\n// Return all five outputs as an array\nreturn [output1, output2, output3, output4, output5];\n","outputs":5,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":626,"y":875,"wires":[["1db5bd9f4dc1f6d1"],["3e2268e93ed0cf68"],["dc2a74aff5e0d651"],["0dfdd42cbadc1a1c"],["da67bb1be4281916"]]},{"id":"023f7f292ccd0164","type":"comment","z":"39f2b91c983d671f","name":"Disk Usage","info":"","x":816,"y":815,"wires":[]},{"id":"1db5bd9f4dc1f6d1","type":"ui-text","z":"39f2b91c983d671f","group":"8ee7b1867c318ca3","order":1,"width":0,"height":0,"name":"Total Storage","label":"Total Storage (GB)","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":816,"y":855,"wires":[]},{"id":"3e2268e93ed0cf68","type":"ui-text","z":"39f2b91c983d671f","group":"8ee7b1867c318ca3","order":3,"width":0,"height":0,"name":"Used Storage","label":"Used Storage (GB)","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":826,"y":895,"wires":[]},{"id":"dc2a74aff5e0d651","type":"ui-text","z":"39f2b91c983d671f","group":"8ee7b1867c318ca3","order":2,"width":0,"height":0,"name":"Free Storage","label":"Free Storage (GB)","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":816,"y":935,"wires":[]},{"id":"0dfdd42cbadc1a1c","type":"ui-gauge","z":"39f2b91c983d671f","name":"Used Storage","group":"8ee7b1867c318ca3","order":5,"width":3,"height":3,"gtype":"gauge-tank","gstyle":"needle","title":"Used Storage","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#a8f5ff"},{"from":"15","color":"#55dbec"},{"from":"35","color":"#53b4fd"},{"from":"50","color":"#2397d1"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":826,"y":975,"wires":[]},{"id":"da67bb1be4281916","type":"ui-gauge","z":"39f2b91c983d671f","name":"Free Storage","group":"8ee7b1867c318ca3","order":4,"width":3,"height":3,"gtype":"gauge-tank","gstyle":"needle","title":"Free Storage","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#a8f5ff"},{"from":"15","color":"#55dbec"},{"from":"35","color":"#53b4fd"},{"from":"50","color":"#2397d1"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":816,"y":1015,"wires":[]},{"id":"a7f51d25943cec64","type":"OS","z":"39f2b91c983d671f","name":"","x":436,"y":195,"wires":[["d204a0af6bfd434e","5477c749de145490","daa940d746ec2bef"]]},{"id":"b27627174b2cb1ac","type":"Uptime","z":"39f2b91c983d671f","name":"","x":446,"y":155,"wires":[["47c24b2506364a5a"]]},{"id":"91b465681153a8a9","type":"CPUs","z":"39f2b91c983d671f","name":"","x":435,"y":245,"wires":[[]]},{"id":"8614287768526732","type":"Memory","z":"39f2b91c983d671f","name":"","x":446,"y":615,"wires":[["92d7c90757d47543","3483b24989d032a3","507876942fdfea09","a6149aba5c0badd3"]]},{"id":"fe3d159d265b0acc","type":"ui-template","z":"13a0b285aa95568e","group":"7f84e6e11f01d5aa","page":"","ui":"","name":"Security","order":1,"width":"0","height":"0","head":"","format":"<template>\n  <div>\n    <div id=\"iframe_block\">\n      <!-- <div v-if=\"isScaning && !iframeUrl\" class=\"skeleton_box\"></div> -->\n      <iframe id=\"iframe_recamera\"  :src=\"iframeUrl\"></iframe>\n      <!-- <div v-else>\n        No website found, please check your network connection and\n        <button @click=\"function(){location.reload()}\">Refresh</button>\n      </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      console.log(12312);\n      function getDeviceType() {\n        const userAgent = navigator.userAgent.toLowerCase();\n        return;\n        /mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(\n          userAgent\n        )\n          ? \"PC\"\n          : \"mobile\";\n      }\n      return {\n        ipByDevice: \"\",\n        enabledIpList: [],\n        checkAllIps: true,\n        isScaning: false,\n        scanningTimeout: 3000, // ms\n        deviceType: getDeviceType(),\n        iframeUrl: `http://${window.location.hostname}/#/security?disablelayout=1`\n      };\n    },\n    computed: {\n      // iframeUrl: function () {\n      //   if (this.isScaning) {\n      //     return;\n      //   }\n      //   const ipByDevice = this.ipByDevice;\n      //   const ipList = this.enabledIpList;\n\n      //   // æ— ä»»ä½•å¯ç”¨\n      //   if (!(ipList.length > 0)) {\n      //     return ipByDevice ? this.getUrl(ipByDevice) : null;\n      //   }\n\n      //   if (ipByDevice && ipList.includes(ipByDevice)) {\n      //     return this.getUrl(ipByDevice);\n      //   }\n\n      //   return this.getUrl(ipList[0]);\n      // }\n    },\n    watch: {\n      msg: function (msg, prevMsg) {\n        try {\n          //debounce é˜²æŠ–\n          if (\n            prevMsg &&\n            prevMsg.interfaces &&\n            JSON.stringify(prevMsg.interfaces) ===\n              JSON.stringify(msg.interfaces)\n          ) {\n            console.log('ğŸ™ˆğŸ™ˆ Same msg: Skip....')\n            return;\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        this.scanning(msg);\n      }\n    },\n    methods: {\n      getUrl(ipAddress) {\n        return `http://${window.location.hostname}/#/security?disablelayout=1`;\n      },\n      scanning(msg) {\n        if (!(msg && msg.interfaces)) {\n          return;\n        }\n        this.ipByDevice = this.getIpByDevice(msg.interfaces);\n        this.scaningAddreses(msg.interfaces);\n      },\n      getIpByDevice: function (addresses) {\n        const ipAddress =\n          (this.deviceType === \"PC\"\n            ? addresses[\"usb\"] || addresses[\"wlan\"]\n            : addresses[\"wlan\"] || addresses[\"usb\"]) ||\n          addresses[\"eth\"] ||\n          addresses[\"en\"];\n        if (!ipAddress) {\n          return null;\n        }\n        return ipAddress;\n      },\n\n      scaningAddreses: function (addresses) {\n        if (!addresses || this.isScaning) {\n          return;\n        }\n        console.log(\"scanning addresses\");\n        const self = this;\n        let results = [];\n        var keys = Object.keys(addresses);\n        const len = keys.length;\n        self.isScaning = true;\n\n        let fn = (i) => {\n          if (\n            i >= len ||\n            (!self.checkAllIps && self.enabledIpList.length > 0)\n          ) {\n            self.isScaning = false;\n            self.enabledIpList = results;\n            console.log(\n              `%cScaning Finished âœ…\\nâœ¨Enabled Addresses: ${self.enabledIpList.join(\n                \",\"\n              )}`,\n              \"color:#87ba32\"\n            );\n\n            fn = () => {};\n            return;\n          }\n          let src = self.getUrl(addresses[keys[i]]);\n          const xhr = new XMLHttpRequest();\n          xhr.timeout = self.scanningTimeout;\n\n          const errorFn = () => {\n            fn(++i);\n          };\n\n          xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              results.push(addresses[keys[i]]);\n              console.log(\n                `%câœ¨(${i + 1}/${len})ping test Success: ${src}`,\n                \"color: #87ba32;\"\n              );\n              fn(++i);\n              return;\n            }\n            errorFn();\n          };\n\n          xhr.onerror = function () {\n            errorFn();\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test error: ${src}`,\n              \"color:red\"\n            );\n          };\n          // å®šä¹‰è¶…æ—¶å›è°ƒ\n          xhr.ontimeout = function () {\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test timeout: ${src}`,\n              \"color:red;\"\n            );\n            errorFn();\n          };\n\n          console.log(\n            `%cğŸš¥(${i + 1}/${len}) start ping test: ${src}`,\n            \"color: #d8eeff;\"\n          );\n          xhr.open(\"GET\", src, true);\n          // å‘é€è¯·æ±‚\n          xhr.send();\n        };\n        fn(0);\n      },\n\n      // è·å–æ‰€æœ‰å¯ç”¨IP\n      getIpAddresses: function (interfaces) {\n        const reg = /^(wlan|usb|eth|en)/;\n        const addresses = {};\n        for (let iface in interfaces) {\n          for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n              matches &&\n              matches[1] &&\n              address.family === \"IPv4\" &&\n              !address.internal\n            ) {\n              addresses[matches[1]] = address.address;\n            }\n          }\n        }\n        return addresses;\n      }\n    },\n    mounted() {\n      this.scanning(this.msg);\n    }\n  };\n</script>\n<style>\n  body,\n  html {\n    overflow: hidden;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n  }\n\n  #iframe_block {\n    overflow: auto;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    z-index: 10000;\n    background-color: #eee;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #iframe_block iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n  }\n\n  .skeleton_box {\n    width: 50%;\n    height: 50%;\n    background: #e0e0e0;\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .skeleton_box::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg,\n        rgba(255, 255, 255, 0) 0%,\n        rgba(255, 255, 255, 0.5) 50%,\n        rgba(255, 255, 255, 0) 100%);\n    animation: shimmer 1.5s infinite;\n  }\n\n  @keyframes shimmer {\n    0% {\n      left: -100%;\n    }\n\n    100% {\n      left: 100%;\n    }\n  }\n</style>","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":600,"y":80,"wires":[[]]},{"id":"e46e9e40df1fba95","type":"ui-template","z":"13a0b285aa95568e","group":"15bec593c23e2df1","page":"","ui":"","name":"Network","order":1,"width":"12","height":"12","head":"","format":"<template>\n  <div>\n    <div id=\"iframe_block\">\n      <!-- <div v-if=\"isScaning && !iframeUrl\" class=\"skeleton_box\"></div> -->\n      <iframe id=\"iframe_recamera\" :src=\"iframeUrl\"></iframe>\n      <!-- <div v-else>\n        No website found, please check your network connection and\n        <button @click=\"function(){location.reload()}\">Refresh</button>\n      </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      console.log(12312);\n      function getDeviceType() {\n        const userAgent = navigator.userAgent.toLowerCase();\n        return;\n        /mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(\n          userAgent\n        )\n          ? \"PC\"\n          : \"mobile\";\n      }\n      return {\n        ipByDevice: \"\",\n        enabledIpList: [],\n        checkAllIps: true,\n        isScaning: false,\n        scanningTimeout: 3000, // ms\n        deviceType: getDeviceType(),\n        iframeUrl: `http://${window.location.hostname}/#/network?disablelayout=1`\n      };\n    },\n    computed: {\n      // iframeUrl: function () {\n      //   if (this.isScaning) {\n      //     return;\n      //   }\n      //   const ipByDevice = this.ipByDevice;\n      //   const ipList = this.enabledIpList;\n\n      //   // æ— ä»»ä½•å¯ç”¨\n      //   if (!(ipList.length > 0)) {\n      //     return ipByDevice ? this.getUrl(ipByDevice) : null;\n      //   }\n\n      //   if (ipByDevice && ipList.includes(ipByDevice)) {\n      //     return this.getUrl(ipByDevice);\n      //   }\n\n      //   return this.getUrl(ipList[0]);\n      // }\n    },\n    watch: {\n      msg: function (msg, prevMsg) {\n        try {\n          //debounce é˜²æŠ–\n          if (\n            prevMsg &&\n            prevMsg.interfaces &&\n            JSON.stringify(prevMsg.interfaces) ===\n              JSON.stringify(msg.interfaces)\n          ) {\n            console.log('ğŸ™ˆğŸ™ˆ Same msg: Skip....')\n            return;\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        this.scanning(msg);\n        console.log(msg.interfaces, '---msg.interfaces---')\n      }\n    },\n    methods: {\n      getUrl(ipAddress) {\n        return `http://${ipAddress}/#/network?disablelayout=1`;\n      },\n      scanning(msg) {\n        if (!(msg && msg.interfaces)) {\n          return;\n        }\n        this.ipByDevice = this.getIpByDevice(msg.interfaces);\n        this.scaningAddreses(msg.interfaces);\n        console.log(msg.interfaces, '---msg.interfaces---')\n      },\n      getIpByDevice: function (addresses) {\n        const ipAddress =\n          (this.deviceType === \"PC\"\n            ? addresses[\"usb\"] || addresses[\"wlan\"]\n            : addresses[\"wlan\"] || addresses[\"usb\"]) ||\n          addresses[\"eth\"] ||\n          addresses[\"en\"];\n        if (!ipAddress) {\n          return null;\n        }\n        return ipAddress;\n      },\n\n      scaningAddreses: function (addresses) {\n        if (!addresses || this.isScaning) {\n          return;\n        }\n        console.log(\"scanning addresses\");\n        const self = this;\n        let results = [];\n        var keys = Object.keys(addresses);\n        const len = keys.length;\n        self.isScaning = true;\n\n        let fn = (i) => {\n          if (\n            i >= len ||\n            (!self.checkAllIps && self.enabledIpList.length > 0)\n          ) {\n            self.isScaning = false;\n            self.enabledIpList = results;\n            console.log(\n              `%cScaning Finished âœ…\\nâœ¨Enabled Addresses: ${self.enabledIpList.join(\n                \",\"\n              )}`,\n              \"color:#87ba32\"\n            );\n\n            fn = () => {};\n            return;\n          }\n          let src = self.getUrl(addresses[keys[i]]);\n          const xhr = new XMLHttpRequest();\n          xhr.timeout = self.scanningTimeout;\n\n          const errorFn = () => {\n            fn(++i);\n          };\n\n          xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              results.push(addresses[keys[i]]);\n              console.log(\n                `%câœ¨(${i + 1}/${len})ping test Success: ${src}`,\n                \"color: #87ba32;\"\n              );\n              fn(++i);\n              return;\n            }\n            errorFn();\n          };\n\n          xhr.onerror = function () {\n            errorFn();\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test error: ${src}`,\n              \"color:red\"\n            );\n          };\n          // å®šä¹‰è¶…æ—¶å›è°ƒ\n          xhr.ontimeout = function () {\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test timeout: ${src}`,\n              \"color:red;\"\n            );\n            errorFn();\n          };\n\n          console.log(\n            `%cğŸš¥(${i + 1}/${len}) start ping test: ${src}`,\n            \"color: #d8eeff;\"\n          );\n          xhr.open(\"GET\", src, true);\n          // å‘é€è¯·æ±‚\n          xhr.send();\n        };\n        fn(0);\n      },\n\n      // è·å–æ‰€æœ‰å¯ç”¨IP\n      getIpAddresses: function (interfaces) {\n        const reg = /^(wlan|usb|eth|en)/;\n        const addresses = {};\n        for (let iface in interfaces) {\n          for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n              matches &&\n              matches[1] &&\n              address.family === \"IPv4\" &&\n              !address.internal\n            ) {\n              addresses[matches[1]] = address.address;\n            }\n          }\n        }\n        return addresses;\n      }\n    },\n    mounted() {\n      this.scanning(this.msg);\n    }\n  };\n</script>\n<style>\n  body,\n  html {\n    overflow: hidden;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n  }\n\n  #iframe_block {\n    overflow: auto;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    z-index: 10000;\n    background-color: #eee;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #iframe_block iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n  }\n\n  .skeleton_box {\n    width: 50%;\n    height: 50%;\n    background: #e0e0e0;\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .skeleton_box::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg,\n        rgba(255, 255, 255, 0) 0%,\n        rgba(255, 255, 255, 0.5) 50%,\n        rgba(255, 255, 255, 0) 100%);\n    animation: shimmer 1.5s infinite;\n  }\n\n  @keyframes shimmer {\n    0% {\n      left: -100%;\n    }\n\n    100% {\n      left: 100%;\n    }\n  }\n</style>","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":600,"y":160,"wires":[[]]},{"id":"8689baa62fe722f9","type":"ui-template","z":"13a0b285aa95568e","group":"62e3f90362f475e5","page":"","ui":"","name":"Terminal","order":1,"width":"12","height":"12","head":"","format":"<template>\n  <div>\n    <div id=\"iframe_block\">\n      <!-- <div v-if=\"isScaning && !iframeUrl\" class=\"skeleton_box\"></div> -->\n      <iframe id=\"iframe_recamera\" :src=\"iframeUrl\"></iframe>\n      <!-- <div v-else>\n        No website found, please check your network connection and\n        <button @click=\"function(){location.reload()}\">Refresh</button>\n      </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      console.log(12312);\n      function getDeviceType() {\n        const userAgent = navigator.userAgent.toLowerCase();\n        return;\n        /mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(\n          userAgent\n        )\n          ? \"PC\"\n          : \"mobile\";\n      }\n      return {\n        ipByDevice: \"\",\n        enabledIpList: [],\n        checkAllIps: true,\n        isScaning: false,\n        scanningTimeout: 3000, // ms\n        deviceType: getDeviceType(),\n        iframeUrl: `http://${window.location.hostname}/#/terminal?disablelayout=1`\n      };\n    },\n    computed: {\n      // iframeUrl: function () {\n      //   if (this.isScaning) {\n      //     return;\n      //   }\n      //   const ipByDevice = this.ipByDevice;\n      //   const ipList = this.enabledIpList;\n\n      //   // æ— ä»»ä½•å¯ç”¨\n      //   if (!(ipList.length > 0)) {\n      //     return ipByDevice ? this.getUrl(ipByDevice) : null;\n      //   }\n\n      //   if (ipByDevice && ipList.includes(ipByDevice)) {\n      //     return this.getUrl(ipByDevice);\n      //   }\n\n      //   return this.getUrl(ipList[0]);\n      // }\n    },\n    watch: {\n      msg: function (msg, prevMsg) {\n        try {\n          //debounce é˜²æŠ–\n          if (\n            prevMsg &&\n            prevMsg.interfaces &&\n            JSON.stringify(prevMsg.interfaces) ===\n              JSON.stringify(msg.interfaces)\n          ) {\n            console.log('ğŸ™ˆğŸ™ˆ Same msg: Skip....')\n            return;\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        this.scanning(msg);\n      }\n    },\n    methods: {\n      getUrl(ipAddress) {\n        return `http://${ipAddress}/#/terminal?disablelayout=1`;\n      },\n      scanning(msg) {\n        if (!(msg && msg.interfaces)) {\n          return;\n        }\n        this.ipByDevice = this.getIpByDevice(msg.interfaces);\n        this.scaningAddreses(msg.interfaces);\n      },\n      getIpByDevice: function (addresses) {\n        const ipAddress =\n          (this.deviceType === \"PC\"\n            ? addresses[\"usb\"] || addresses[\"wlan\"]\n            : addresses[\"wlan\"] || addresses[\"usb\"]) ||\n          addresses[\"eth\"] ||\n          addresses[\"en\"];\n        if (!ipAddress) {\n          return null;\n        }\n        return ipAddress;\n      },\n\n      scaningAddreses: function (addresses) {\n        if (!addresses || this.isScaning) {\n          return;\n        }\n        console.log(\"scanning addresses\");\n        const self = this;\n        let results = [];\n        var keys = Object.keys(addresses);\n        const len = keys.length;\n        self.isScaning = true;\n\n        let fn = (i) => {\n          if (\n            i >= len ||\n            (!self.checkAllIps && self.enabledIpList.length > 0)\n          ) {\n            self.isScaning = false;\n            self.enabledIpList = results;\n            console.log(\n              `%cScaning Finished âœ…\\nâœ¨Enabled Addresses: ${self.enabledIpList.join(\n                \",\"\n              )}`,\n              \"color:#87ba32\"\n            );\n\n            fn = () => {};\n            return;\n          }\n          let src = self.getUrl(addresses[keys[i]]);\n          const xhr = new XMLHttpRequest();\n          xhr.timeout = self.scanningTimeout;\n\n          const errorFn = () => {\n            fn(++i);\n          };\n\n          xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              results.push(addresses[keys[i]]);\n              console.log(\n                `%câœ¨(${i + 1}/${len})ping test Success: ${src}`,\n                \"color: #87ba32;\"\n              );\n              fn(++i);\n              return;\n            }\n            errorFn();\n          };\n\n          xhr.onerror = function () {\n            errorFn();\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test error: ${src}`,\n              \"color:red\"\n            );\n          };\n          // å®šä¹‰è¶…æ—¶å›è°ƒ\n          xhr.ontimeout = function () {\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test timeout: ${src}`,\n              \"color:red;\"\n            );\n            errorFn();\n          };\n\n          console.log(\n            `%cğŸš¥(${i + 1}/${len}) start ping test: ${src}`,\n            \"color: #d8eeff;\"\n          );\n          xhr.open(\"GET\", src, true);\n          // å‘é€è¯·æ±‚\n          xhr.send();\n        };\n        fn(0);\n      },\n\n      // è·å–æ‰€æœ‰å¯ç”¨IP\n      getIpAddresses: function (interfaces) {\n        const reg = /^(wlan|usb|eth|en)/;\n        const addresses = {};\n        for (let iface in interfaces) {\n          for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n              matches &&\n              matches[1] &&\n              address.family === \"IPv4\" &&\n              !address.internal\n            ) {\n              addresses[matches[1]] = address.address;\n            }\n          }\n        }\n        return addresses;\n      }\n    },\n    mounted() {\n      this.scanning(this.msg);\n    }\n  };\n</script>\n<style>\n  body,\n  html {\n    overflow: hidden;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n  }\n\n  #iframe_block {\n    overflow: auto;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    z-index: 10000;\n    background-color: #eee;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #iframe_block iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n  }\n\n  .skeleton_box {\n    width: 50%;\n    height: 50%;\n    background: #e0e0e0;\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .skeleton_box::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg,\n        rgba(255, 255, 255, 0) 0%,\n        rgba(255, 255, 255, 0.5) 50%,\n        rgba(255, 255, 255, 0) 100%);\n    animation: shimmer 1.5s infinite;\n  }\n\n  @keyframes shimmer {\n    0% {\n      left: -100%;\n    }\n\n    100% {\n      left: 100%;\n    }\n  }\n</style>","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":620,"y":480,"wires":[[]]},{"id":"eaf134f38ac167a9","type":"function","z":"13a0b285aa95568e","name":"Get IP Address","func":"\n\n\nconst interfaces = os.networkInterfaces()\nmsg.interfaces = context.get('getIpAddresses')(interfaces)\nreturn msg","outputs":1,"timeout":"","noerr":0,"initialize":"\n\nfunction getIpAddresses(interfaces) {\n    const reg = /^(wlan|usb|eth|en)/;\n    const addresses = {};\n    for (let iface in interfaces) {\n        for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n                matches &&\n                matches[1] &&\n                address.family === \"IPv4\" &&\n                !address.internal\n            ) {\n                addresses[matches[1]] = address.address;\n            }\n        }\n    }\n    return addresses;\n}\ncontext.set(\"getIpAddresses\", getIpAddresses); ","finalize":"","libs":[{"var":"os","module":"os"}],"x":300,"y":240,"wires":[["fe3d159d265b0acc","e46e9e40df1fba95","8689baa62fe722f9","e2ce9654d1d5f1d9","135ebaeb1bc34ca3"]]},{"id":"806d5f750dfbbbba","type":"inject","z":"13a0b285aa95568e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":240,"wires":[["eaf134f38ac167a9"]]},{"id":"91d77f3c451880cf","type":"comment","z":"13a0b285aa95568e","name":"Basic Web Functions","info":"Here are the basic web functions for reCamera.\nPlease notice that if you change this part, the basic functions for the reCamera could be damaged or missing.","x":640,"y":40,"wires":[]},{"id":"e2ce9654d1d5f1d9","type":"ui-template","z":"13a0b285aa95568e","group":"a2f6b486b575c329","page":"","ui":"","name":"System Update","order":3,"width":"6","height":"6","head":"","format":"<template>\n  <div>\n    <div id=\"iframe_block\">\n      <!-- <div v-if=\"isScaning && !iframeUrl\" class=\"skeleton_box\"></div> -->\n      <iframe id=\"iframe_recamera\" :src=\"iframeUrl\"></iframe>\n      <!-- <div v-else>\n        No website found, please check your network connection and\n        <button @click=\"function(){location.reload()}\">Refresh</button>\n      </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      console.log(12312);\n      function getDeviceType() {\n        const userAgent = navigator.userAgent.toLowerCase();\n        return;\n        /mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(\n          userAgent\n        )\n          ? \"PC\"\n          : \"mobile\";\n      }\n      return {\n        ipByDevice: \"\",\n        enabledIpList: [],\n        checkAllIps: true,\n        isScaning: false,\n        scanningTimeout: 3000, // ms\n        deviceType: getDeviceType(),\n        iframeUrl: `http://${window.location.hostname}/#/system?disablelayout=1`\n      };\n    },\n    computed: {\n      // iframeUrl: function () {\n      //   if (this.isScaning) {\n      //     return;\n      //   }\n      //   const ipByDevice = this.ipByDevice;\n      //   const ipList = this.enabledIpList;\n\n      //   // æ— ä»»ä½•å¯ç”¨\n      //   if (!(ipList.length > 0)) {\n      //     return ipByDevice ? this.getUrl(ipByDevice) : null;\n      //   }\n\n      //   if (ipByDevice && ipList.includes(ipByDevice)) {\n      //     return this.getUrl(ipByDevice);\n      //   }\n      //   return this.getUrl(ipList[0]);\n      // }\n    },\n    watch: {\n      msg: function (msg, prevMsg) {\n        try {\n          //debounce é˜²æŠ–\n          if (\n            prevMsg &&\n            prevMsg.interfaces &&\n            JSON.stringify(prevMsg.interfaces) ===\n              JSON.stringify(msg.interfaces)\n          ) {\n            console.log('ğŸ™ˆğŸ™ˆ Same msg: Skip....')\n            return;\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        this.scanning(msg);\n      }\n    },\n    methods: {\n      getUrl(ipAddress) {\n        return `http://${ipAddress}/#/system?disablelayout=1`;\n      },\n      scanning(msg) {\n        if (!(msg && msg.interfaces)) {\n          return;\n        }\n        this.ipByDevice = this.getIpByDevice(msg.interfaces);\n        this.scaningAddreses(msg.interfaces);\n      },\n      getIpByDevice: function (addresses) {\n        const ipAddress =\n          (this.deviceType === \"PC\"\n            ? addresses[\"usb\"] || addresses[\"wlan\"]\n            : addresses[\"wlan\"] || addresses[\"usb\"]) ||\n          addresses[\"eth\"] ||\n          addresses[\"en\"];\n        if (!ipAddress) {\n          return null;\n        }\n        return ipAddress;\n      },\n\n      scaningAddreses: function (addresses) {\n        if (!addresses || this.isScaning) {\n          return;\n        }\n        console.log(\"scanning addresses\");\n        const self = this;\n        let results = [];\n        var keys = Object.keys(addresses);\n        const len = keys.length;\n        self.isScaning = true;\n\n        let fn = (i) => {\n          if (\n            i >= len ||\n            (!self.checkAllIps && self.enabledIpList.length > 0)\n          ) {\n            self.isScaning = false;\n            self.enabledIpList = results;\n            console.log(\n              `%cScaning Finished âœ…\\nâœ¨Enabled Addresses: ${self.enabledIpList.join(\n                \",\"\n              )}`,\n              \"color:#87ba32\"\n            );\n\n            fn = () => {};\n            return;\n          }\n          let src = self.getUrl(addresses[keys[i]]);\n          const xhr = new XMLHttpRequest();\n          xhr.timeout = self.scanningTimeout;\n\n          const errorFn = () => {\n            fn(++i);\n          };\n\n          xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              results.push(addresses[keys[i]]);\n              console.log(\n                `%câœ¨(${i + 1}/${len})ping test Success: ${src}`,\n                \"color: #87ba32;\"\n              );\n              fn(++i);\n              return;\n            }\n            errorFn();\n          };\n\n          xhr.onerror = function () {\n            errorFn();\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test error: ${src}`,\n              \"color:red\"\n            );\n          };\n          // å®šä¹‰è¶…æ—¶å›è°ƒ\n          xhr.ontimeout = function () {\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test timeout: ${src}`,\n              \"color:red;\"\n            );\n            errorFn();\n          };\n\n          console.log(\n            `%cğŸš¥(${i + 1}/${len}) start ping test: ${src}`,\n            \"color: #d8eeff;\"\n          );\n          xhr.open(\"GET\", src, true);\n          // å‘é€è¯·æ±‚\n          xhr.send();\n        };\n        fn(0);\n      },\n\n      // è·å–æ‰€æœ‰å¯ç”¨IP\n      getIpAddresses: function (interfaces) {\n        const reg = /^(wlan|usb|eth|en)/;\n        const addresses = {};\n        for (let iface in interfaces) {\n          for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n              matches &&\n              matches[1] &&\n              address.family === \"IPv4\" &&\n              !address.internal\n            ) {\n              addresses[matches[1]] = address.address;\n            }\n          }\n        }\n        return addresses;\n      }\n    },\n    mounted() {\n      this.scanning(this.msg);\n    }\n  };\n</script>\n<style>\n  body,\n  html {\n    overflow: hidden;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n  }\n\n  #iframe_block {\n    overflow: auto;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    z-index: 10000;\n    background-color: #eee;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #iframe_block iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n  }\n\n  .skeleton_box {\n    width: 50%;\n    height: 50%;\n    background: #e0e0e0;\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .skeleton_box::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg,\n        rgba(255, 255, 255, 0) 0%,\n        rgba(255, 255, 255, 0.5) 50%,\n        rgba(255, 255, 255, 0) 100%);\n    animation: shimmer 1.5s infinite;\n  }\n\n  @keyframes shimmer {\n    0% {\n      left: -100%;\n    }\n\n    100% {\n      left: 100%;\n    }\n  }\n</style>","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":620,"y":480,"wires":[[]]},{"id":"135ebaeb1bc34ca3","type":"ui-template","z":"13a0b285aa95568e","group":"853d93c4c0f19c38","page":"","ui":"","name":"Power","order":1,"width":"6","height":"6","head":"","format":"<template>\n  <div>\n    <div id=\"iframe_block\">\n      <!-- <div v-if=\"isScaning && !iframeUrl\" class=\"skeleton_box\"></div> -->\n      <iframe id=\"iframe_recamera\" :src=\"iframeUrl\"></iframe>\n      <!-- <div v-else>\n        No website found, please check your network connection and\n        <button @click=\"function(){location.reload()}\">Refresh</button>\n      </div> -->\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      console.log(12312);\n      function getDeviceType() {\n        const userAgent = navigator.userAgent.toLowerCase();\n        return;\n        /mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(\n          userAgent\n        )\n          ? \"PC\"\n          : \"mobile\";\n      }\n      return {\n        ipByDevice: \"\",\n        enabledIpList: [],\n        checkAllIps: true,\n        isScaning: false,\n        scanningTimeout: 3000, // ms\n        deviceType: getDeviceType(),\n        iframeUrl: `http://${window.location.hostname}/#/power?disablelayout=1`\n      };\n    },\n    computed: {\n      // iframeUrl: function () {\n      //   if (this.isScaning) {\n      //     return;\n      //   }\n      //   const ipByDevice = this.ipByDevice;\n      //   const ipList = this.enabledIpList;\n\n      //   // æ— ä»»ä½•å¯ç”¨\n      //   if (!(ipList.length > 0)) {\n      //     return ipByDevice ? this.getUrl(ipByDevice) : null;\n      //   }\n\n      //   if (ipByDevice && ipList.includes(ipByDevice)) {\n      //     return this.getUrl(ipByDevice);\n      //   }\n\n      //   return this.getUrl(ipList[0]);\n      // }\n    },\n    watch: {\n      msg: function (msg, prevMsg) {\n        try {\n          //debounce é˜²æŠ–\n          if (\n            prevMsg &&\n            prevMsg.interfaces &&\n            JSON.stringify(prevMsg.interfaces) ===\n              JSON.stringify(msg.interfaces)\n          ) {\n            console.log('ğŸ™ˆğŸ™ˆ Same msg: Skip....')\n            return;\n          }\n        } catch (e) {\n          console.log(e);\n        }\n        this.scanning(msg);\n      }\n    },\n    methods: {\n      getUrl(ipAddress) {\n        return `http://${ipAddress}/#/power?disablelayout=1`;\n      },\n      scanning(msg) {\n        if (!(msg && msg.interfaces)) {\n          return;\n        }\n        this.ipByDevice = this.getIpByDevice(msg.interfaces);\n        this.scaningAddreses(msg.interfaces);\n      },\n      getIpByDevice: function (addresses) {\n        const ipAddress =\n          (this.deviceType === \"PC\"\n            ? addresses[\"usb\"] || addresses[\"wlan\"]\n            : addresses[\"wlan\"] || addresses[\"usb\"]) ||\n          addresses[\"eth\"] ||\n          addresses[\"en\"];\n        if (!ipAddress) {\n          return null;\n        }\n        return ipAddress;\n      },\n\n      scaningAddreses: function (addresses) {\n        if (!addresses || this.isScaning) {\n          return;\n        }\n        console.log(\"scanning addresses\");\n        const self = this;\n        let results = [];\n        var keys = Object.keys(addresses);\n        const len = keys.length;\n        self.isScaning = true;\n\n        let fn = (i) => {\n          if (\n            i >= len ||\n            (!self.checkAllIps && self.enabledIpList.length > 0)\n          ) {\n            self.isScaning = false;\n            self.enabledIpList = results;\n            console.log(\n              `%cScaning Finished âœ…\\nâœ¨Enabled Addresses: ${self.enabledIpList.join(\n                \",\"\n              )}`,\n              \"color:#87ba32\"\n            );\n\n            fn = () => {};\n            return;\n          }\n          let src = self.getUrl(addresses[keys[i]]);\n          const xhr = new XMLHttpRequest();\n          xhr.timeout = self.scanningTimeout;\n\n          const errorFn = () => {\n            fn(++i);\n          };\n\n          xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              results.push(addresses[keys[i]]);\n              console.log(\n                `%câœ¨(${i + 1}/${len})ping test Success: ${src}`,\n                \"color: #87ba32;\"\n              );\n              fn(++i);\n              return;\n            }\n            errorFn();\n          };\n\n          xhr.onerror = function () {\n            errorFn();\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test error: ${src}`,\n              \"color:red\"\n            );\n          };\n          // å®šä¹‰è¶…æ—¶å›è°ƒ\n          xhr.ontimeout = function () {\n            console.log(\n              `%cğŸš¥(${i + 1}/${len}) ping test timeout: ${src}`,\n              \"color:red;\"\n            );\n            errorFn();\n          };\n\n          console.log(\n            `%cğŸš¥(${i + 1}/${len}) start ping test: ${src}`,\n            \"color: #d8eeff;\"\n          );\n          xhr.open(\"GET\", src, true);\n          // å‘é€è¯·æ±‚\n          xhr.send();\n        };\n        fn(0);\n      },\n\n      // è·å–æ‰€æœ‰å¯ç”¨IP\n      getIpAddresses: function (interfaces) {\n        const reg = /^(wlan|usb|eth|en)/;\n        const addresses = {};\n        for (let iface in interfaces) {\n          for (let i = 0; i < interfaces[iface].length; i++) {\n            let address = interfaces[iface][i];\n            /* Ipv4 & æ’é™¤å†…éƒ¨æ¥å£ & åŒ¹é…å½“å‰ä¼˜å…ˆçº§çš„ç½‘å£åç§° */\n            var matches = iface.match(reg);\n            if (\n              matches &&\n              matches[1] &&\n              address.family === \"IPv4\" &&\n              !address.internal\n            ) {\n              addresses[matches[1]] = address.address;\n            }\n          }\n        }\n        return addresses;\n      }\n    },\n    mounted() {\n      this.scanning(this.msg);\n    }\n  };\n</script>\n<style>\n  body,\n  html {\n    overflow: hidden;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n  }\n\n  #iframe_block {\n    overflow: auto;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    min-height: 500px;\n    z-index: 10000;\n    background-color: #eee;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #iframe_block iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    margin: 0 0 0 0;\n    padding: 0 0 0 0;\n    box-sizing: border-box;\n  }\n\n  .skeleton_box {\n    width: 50%;\n    height: 50%;\n    background: #e0e0e0;\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .skeleton_box::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg,\n        rgba(255, 255, 255, 0) 0%,\n        rgba(255, 255, 255, 0.5) 50%,\n        rgba(255, 255, 255, 0) 100%);\n    animation: shimmer 1.5s infinite;\n  }\n\n  @keyframes shimmer {\n    0% {\n      left: -100%;\n    }\n\n    100% {\n      left: 100%;\n    }\n  }\n</style>","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":590,"y":540,"wires":[[]]}]
```

æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è®¿é—®è¯¥åº”ç”¨é…ç½®æµçš„ JSON æ–‡ä»¶ï¼š[Github](https://github.com/Seeed-Studio/OSHW-reCamera-Series/tree/main/Node-RED_Flow) å’Œ [SenseCraft å¹³å°](https://sensecraft.seeed.cc/ai/home#/recamera)ã€‚

## Tech Support & Product Discussion

Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs.

<div class="button_tech_support_container">
<a href="https://forum.seeedstudio.com/" class="button_forum"></a> 
<a href="https://www.seeedstudio.com/contacts" class="button_email"></a>
</div>

<div class="button_tech_support_container">
<a href="https://discord.gg/eWkprNDMU7" class="button_discord"></a> 
<a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" class="button_discussion"></a>
</div>